<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
        <title>week1 assignment</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <div id="desktop">
            <div class="navbar">
                <div class="title">My Website</div>
                <div class="menu">
                    <div class="item">Item 1</div>
                    <div class="item">Item 2</div>
                    <div class="item">Item 3</div>
                    <div class="item">Item 4</div>
                </div>
            </div>
            <div class="welcome">
                <div class="welcometext">Welcome to MyHome</div>
            </div>
            <div class="content">
            </div>
        </div>
        <script>
            fetch('https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment-1')
                .then(function(response){
                    return response.json();
                }).then (function(data){
                    const spots=data.data.results
                    console.log(spots)
                    renderSpots(spots, ".content");
                });

            function renderSpots(spots, divName) {
                const contentDiv = document.querySelector(divName); // 取得內容區域

                    // 顯示前 3 個景點為小方塊
                    const spotdp0 = createSpotBoxSmallDP(spots[0], "dp0");
                    contentDiv.appendChild(spotdp0);
                    const spotdp1 = createSpotBoxSmallDP(spots[1], "dp1");
                    contentDiv.appendChild(spotdp1);
                    const spotdp2 = createSpotBoxSmallDP(spots[2], "dp2");
                    contentDiv.appendChild(spotdp2);

                    // 顯示接下來的 10 個景點為大方塊
                    const spotdt0 = createSpotBoxBigDTB(spots[3], "dt0");
                    contentDiv.appendChild(spotdt0);
                    const spotdt1 = createSpotBoxBigDTS(spots[4], "dt1");
                    contentDiv.appendChild(spotdt1);
                    const spotdt2 = createSpotBoxBigDTS(spots[5], "dt2");
                    contentDiv.appendChild(spotdt2);
                    const spotdt3 = createSpotBoxBigDTS(spots[6], "dt3");
                    contentDiv.appendChild(spotdt3);
                    const spotdt4 = createSpotBoxBigDTS(spots[7], "dt4");
                    contentDiv.appendChild(spotdt4);
                    const spotdt5 = createSpotBoxBigDTB(spots[8], "dt5");
                    contentDiv.appendChild(spotdt5);
                    const spotdt6 = createSpotBoxBigDTS(spots[9], "dt6");
                    contentDiv.appendChild(spotdt6);
                    const spotdt7 = createSpotBoxBigDTS(spots[10], "dt7");
                    contentDiv.appendChild(spotdt7);
                    const spotdt8 = createSpotBoxBigDTS(spots[11], "dt8");
                    contentDiv.appendChild(spotdt8);
                    const spotdt9 = createSpotBoxBigDTS(spots[12], "dt9");
                    contentDiv.appendChild(spotdt9);
            }

            // 建立小景點盒子
            function createSpotBoxSmallDP(spot, Name) {
                const box = document.createElement('div');
                box.className = Name;

                // 處理圖片（只取第一張）
                console.log(spot.filelist.split('http')[1])
                const firstImageUrl = spot.filelist.split('http')[1] ? 'http' + spot.filelist.split('http')[1] : '';

                const img = document.createElement('img');
                img.src = firstImageUrl;
                img.style.width="80px"
                img.style.height="50px"

                // 處理標題
                const title = document.createElement('div');
                title.textContent = spot.stitle;
                title.style.position = 'absolute';
                title.style.width = '150px';
                title.style.fontSize = '20px';
                title.style.textAlign = 'left';
                title.style.top = '10px';
                title.style.left = '90px';

                // 將圖片和標題加入到盒子中
                box.appendChild(img);
                box.appendChild(title);

                return box;
            }

            // 建立大景點大盒子
            function createSpotBoxBigDTB(spot, Name) {
                const box = document.createElement('div');
                box.className = Name;
                box.style.position='relative';

                // 處理星星
                const star = document.createElement('div');
                star.className = "star";

                const imgStar = document.createElement('img');
                imgStar.src="picture/star.png"
                imgStar.style.position = 'absolute';
                imgStar.style.top= '1px';
                imgStar.style.right= '1px';
                imgStar.style.height= '20px';
                imgStar.style.width= '20px';

                // 處理圖片（只取第一張）
                console.log(spot.filelist.split('http')[1])
                const firstImageUrl = spot.filelist.split('http')[1] ? 'http' + spot.filelist.split('http')[1] : '';

                const img = document.createElement('img');
                img.src = firstImageUrl;
                img.alt="Cinque Terre";
                img.style.width="386.666px";
                img.style.height="210px";

                // 處理標題
                const title = document.createElement('div');
                title.textContent = spot.stitle;
                title.style.width = '386.666px';
                title.style.height = '30px';
                title.style.position = 'absolute';
                title.style.bottom = '0';
                title.style.fontSize = '20px';
                title.style.textAlign = 'center';
                title.style.paddingTop = '5px';
                title.style.paddingBottom = '5px';
                title.style.backgroundColor = 'rgb(227, 238, 165)';
                title.style.opacity = '0.8';
                title.style.overflow = 'hidden';         // 隱藏超出範圍的文字
                title.style.whiteSpace = 'nowrap';      // 禁止文字換行
                title.style.textOverflow = 'ellipsis';  // 超出範圍時顯示 "..."

                // 將圖片和標題加入到盒子中
                star.appendChild(imgStar);
                box.appendChild(star);
                box.appendChild(img);
                box.appendChild(title);

                return box;
            }
            // 建立大景點小盒子
            function createSpotBoxBigDTS(spot, Name) {
                const box = document.createElement('div');
                box.className = Name;
                box.style.position='relative';

                // 處理星星
                const star = document.createElement('div');
                star.className = "star";

                const imgStar = document.createElement('img');
                imgStar.src="picture/star.png"
                imgStar.style.position = 'absolute';
                imgStar.style.top= '1px';
                imgStar.style.right= '1px';
  
                imgStar.style.height= '20px';
                imgStar.style.width= '20px';

                // 處理圖片（只取第一張）
                console.log(spot.filelist.split('http')[1])
                const firstImageUrl = spot.filelist.split('http')[1] ? 'http' + spot.filelist.split('http')[1] : '';

                const img = document.createElement('img');
                img.src = firstImageUrl;
                img.alt="Cinque Terre";
                img.style.width="183.333px";
                img.style.height="210px";

                // 處理標題
                const title = document.createElement('div');
                title.textContent = spot.stitle;
                title.style.width = '173.333px';
                title.style.height = '30px';
                title.style.position = 'absolute';
                title.style.bottom = '0';
                title.style.fontSize = '20px';
                title.style.textAlign = 'center';
                title.style.padding = '5px';
                title.style.paddingBottom = '5px';
                title.style.backgroundColor = 'rgb(227, 238, 165)';
                title.style.opacity = '0.8';
                title.style.overflow = 'hidden';         // 隱藏超出範圍的文字
                title.style.whiteSpace = 'nowrap';      // 禁止文字換行
                title.style.textOverflow = 'ellipsis';  // 超出範圍時顯示 "..."

                // 將圖片和標題加入到盒子中
                star.appendChild(imgStar);
                box.appendChild(star);
                box.appendChild(img);
                box.appendChild(title);

                return box;
            }
        </script>
    </body>
</html>